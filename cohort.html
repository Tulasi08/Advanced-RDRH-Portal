<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal X - Advanced Clinical Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8f9fa; overflow: hidden; }
        
        /* Sidebar Styling */
        .sidebar-item { 
            transition: 0.2s; 
            cursor: pointer; 
            border-radius: 12px; 
            color: #475569; 
            font-weight: 600; 
            margin-bottom: 4px;
        }
        .sidebar-active { 
            background-color: #f3f0ff; 
            color: #5B4D9D; 
        }
        .sidebar-item i { color: #64748b; width: 24px; text-align: center; }
        .sidebar-active i { color: #5B4D9D; }

        .logo-circle {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            border: 2px solid #7c3aed;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Dashboard Components */
        .card { background: white; border-radius: 12px; border: 1px solid #e2e8f0; padding: 1rem; position: relative; }
        .fixed-top-section { position: sticky; top: 0; z-index: 40; background: #f8f9fa; }
        .tab-btn { padding: 12px 16px; font-weight: 600; color: #64748b; border-bottom: 2px solid transparent; }
        .active-tab { color: #5B4D9D; border-bottom: 2px solid #5B4D9D; }
        
        /* Chart Controls */
        .chart-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f1f5f9; padding-bottom: 0.5rem; margin-bottom: 1rem; }
        .chart-title { font-size: 10px; font-weight: 800; color: #475569; text-transform: uppercase; }
        .chart-ctrl-btn { color: #94a3b8; font-size: 12px; padding: 2px 4px; border-radius: 4px; cursor: pointer; }
        .chart-ctrl-btn:hover { background: #f1f5f9; color: #5B4D9D; }
        
        /* Dropdown Menu */
        .chart-menu { position: absolute; top: 35px; right: 10px; background: white; border: 1px solid #e2e8f0; border-radius: 6px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); z-index: 50; width: 160px; display: none; }
        .menu-item { padding: 8px 12px; font-size: 11px; color: #475569; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .menu-item:hover { background: #f1f5f9; color: #5B4D9D; }

        /* Table Styling */
        th { background: #f1f5f9; color: #475569; font-weight: 700; font-size: 10px; text-transform: uppercase; padding: 12px; }
        td { padding: 10px 12px; border-bottom: 1px solid #f1f5f9; font-size: 11px; white-space: nowrap; }
        .group-header { background: #f8fafc; font-weight: 800; color: #6366f1; font-size: 10px; text-transform: uppercase; }
    </style>
</head>
<body class="flex h-screen">

    <aside class="w-64 bg-white border-r border-gray-100 p-6 flex flex-col flex-shrink-0">
        <div class="flex items-center gap-3 mb-12 px-2">
            <div class="logo-circle">
                <i class="fas fa-dna text-[#7c3aed] text-xl"></i>
            </div>
            <span class="text-3xl font-extrabold text-[#334155] tracking-tight">Portal X</span>
        </div>

        <nav class="flex-1">
            <div class="sidebar-item p-4 flex items-center gap-4">
                <i class="fas fa-th-large text-lg"></i> 
                <span>Dashboard</span>
            </div>
            
            <div class="sidebar-item sidebar-active p-4 flex items-center gap-4">
                <i class="fas fa-chart-pie text-lg"></i> 
                <span>Insights & Analytics</span>
            </div>
            
            <div class="sidebar-item p-4 flex items-center gap-4">
                <i class="fas fa-file-alt text-lg"></i> 
                <span>Reports</span>
            </div>
            
            <div class="sidebar-item p-4 flex items-center gap-4">
                <i class="fas fa-user-md text-lg"></i> 
                <span>Team</span>
            </div>
            
            <div class="sidebar-item p-4 flex items-center gap-4">
                <i class="fas fa-clipboard-check text-lg"></i> 
                <span>Enquiry</span>
            </div>

            <div class="sidebar-item p-4 flex items-center gap-4">
                <i class="fas fa-shield-alt text-lg"></i> 
                <span>Authentication</span>
            </div>
        </nav>

        <div class="mt-auto pt-10 px-4">
            <p class="text-[11px] text-gray-400 leading-relaxed">
                Â© 2026 by Company<br>All rights reserved.
            </p>
        </div>
    </aside>

    <div class="flex-1 flex flex-col min-w-0">
        <header class="bg-white border-b border-gray-200 h-16 flex items-center justify-between px-8 flex-shrink-0">
            <div class="relative w-1/3">
                <i class="fas fa-search absolute left-3 top-2.5 text-gray-400"></i>
                <input type="text" placeholder="Search cohorts..." class="w-full bg-gray-50 border border-gray-200 rounded-full py-1.5 pl-10 pr-4 text-sm outline-none">
            </div>
            <div class="flex items-center gap-4">
                <div class="text-right leading-none">
                    <p class="text-sm font-bold">Dr. X</p>
                    <p class="text-[10px] text-gray-400 font-bold uppercase">Admin</p>
                </div>
                <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600">
                    <i class="fas fa-user text-xs"></i>
                </div>
                <i class="fas fa-cog text-gray-400 cursor-pointer"></i>
            </div>
        </header>

        <div class="fixed-top-section px-8 pt-6">
            <h1 class="text-2xl font-bold text-gray-800 mb-4">Data Visualization & Insights</h1>
            <div class="flex border-b border-gray-200 mb-6 bg-white">
                <button class="tab-btn active-tab">Cohort Analytics</button>
                <button class="tab-btn">Patient Level Data</button>
                <button class="tab-btn">Comparative Analysis</button>
                <button class="tab-btn">Single Case View</button>
            </div>
            <div class="bg-white p-4 rounded-xl border border-gray-200 flex items-end gap-4 mb-4 shadow-sm">
                <div class="flex-1">
                    <label class="block text-[10px] font-black uppercase text-gray-400 mb-1">Cancer Type</label>
                    <select class="w-full bg-gray-50 border border-gray-200 rounded p-2 text-xs">
                        <option>All Types</option>
                        <option>Lung Adenocarcinoma</option>
                        <option>Breast Cancer</option>
                    </select>
                </div>
                <div class="flex-1">
                    <label class="block text-[10px] font-black uppercase text-gray-400 mb-1">Gene Mutation</label>
                    <select class="w-full bg-gray-50 border border-gray-200 rounded p-2 text-xs">
                        <option>All Genes</option>
                        <option>EGFR</option>
                        <option>TP53</option>
                        <option>BRCA1</option>
                    </select>
                </div>
                <div class="flex-1">
                    <label class="block text-[10px] font-black uppercase text-gray-400 mb-1">Variant Impact</label>
                    <select class="w-full bg-gray-50 border border-gray-200 rounded p-2 text-xs">
                        <option>High</option>
                        <option>Medium</option>
                        <option>Low</option>
                    </select>
                </div>
                <button class="bg-indigo-600 text-white px-6 py-2 rounded font-bold text-sm hover:bg-indigo-700 transition">
                    <i class="fas fa-filter mr-2"></i> Apply Filters
                </button>
            </div>
        </div>

        <div class="flex-1 overflow-y-auto px-8 pb-10">
            <!-- Summary Metrics Panel -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">

        <!-- Total Cases -->
        <div class="bg-white border border-gray-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
            <p class="text-sm font-semibold text-gray-500 uppercase tracking-wide">Total Cases</p>
            <div class="mt-3 flex items-end gap-3">
                <h2 class="text-3xl font-bold text-purple-600">1,248</h2>
                <span class="text-sm text-green-600 font-semibold">+12% vs last month</span>
            </div>
        </div>

        <!-- Pathogenic Variants -->
        <div class="bg-white border border-gray-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
            <p class="text-sm font-semibold text-gray-500 uppercase tracking-wide">High Impact Variants</p>
            <div class="mt-3 flex items-end gap-3">
                <h2 class="text-3xl font-bold text-red-500">342</h2>
                <span class="text-sm text-gray-400">27% of total</span>
            </div>
        </div>

        <!-- Emerging Biomarker -->
        <div class="bg-white border border-gray-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
            <p class="text-sm font-semibold text-gray-500 uppercase tracking-wide">Emerging Biomarker</p>
            <div class="mt-3">
                <h2 class="text-2xl font-bold text-orange-500">EGFR T790M</h2>
                <p class="text-sm text-gray-400 mt-1">High prevalence</p>
            </div>
        </div>

    </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10 mt-4">
                
                <div class="card">
                    <div class="chart-header"><span class="chart-title">Variant Distribution</span>
                        <div class="flex gap-1"><i class="fas fa-info-circle chart-ctrl-btn"></i><i class="fas fa-times chart-ctrl-btn"></i><i class="fas fa-bars chart-ctrl-btn" onclick="toggleMenu('m1')"></i></div>
                    </div>
                    <div id="m1" class="chart-menu"><div class="menu-item">Compare Groups <i class="fas fa-chevron-right text-[8px]"></i></div><div class="menu-item">Download <i class="fas fa-download text-[10px]"></i></div></div>
                    <canvas id="variantDistChart" height="200"></canvas>
                </div>

                <div class="card">
                    <div class="chart-header"><span class="chart-title">Gene Prevalence</span>
                        <div class="flex gap-1"><i class="fas fa-info-circle chart-ctrl-btn"></i><i class="fas fa-times chart-ctrl-btn"></i><i class="fas fa-bars chart-ctrl-btn" onclick="toggleMenu('m2')"></i></div>
                    </div>
                    <div id="m2" class="chart-menu"><div class="menu-item">Compare Groups <i class="fas fa-chevron-right text-[8px]"></i></div><div class="menu-item">Download <i class="fas fa-download text-[10px]"></i></div></div>
                    <canvas id="prevalenceChart" height="200"></canvas>
                </div>

                <div class="card">
                    <div class="chart-header"><span class="chart-title">Mutation vs Genome Altered</span>
                        <div class="flex gap-1"><i class="fas fa-info-circle chart-ctrl-btn"></i><i class="fas fa-times chart-ctrl-btn"></i><i class="fas fa-bars chart-ctrl-btn" onclick="toggleMenu('m3')"></i></div>
                    </div>
                    <div id="m3" class="chart-menu"><div class="menu-item">Compare Groups <i class="fas fa-chevron-right text-[8px]"></i></div><div class="menu-item">Download <i class="fas fa-download text-[10px]"></i></div></div>
                    <canvas id="mutationScatterChart" height="200"></canvas>
                </div>

                <div class="card">
                    <div class="chart-header"><span class="chart-title">Mutation Count Per Sample</span>
                        <div class="flex gap-1"><i class="fas fa-info-circle chart-ctrl-btn"></i><i class="fas fa-times chart-ctrl-btn"></i><i class="fas fa-bars chart-ctrl-btn" onclick="toggleMenu('m4')"></i></div>
                    </div>
                    <div id="m4" class="chart-menu"><div class="menu-item">Custom Bins <i class="fas fa-chevron-right text-[8px]"></i></div><div class="menu-item">Download <i class="fas fa-download text-[10px]"></i></div></div>
                    <canvas id="mutationCountChart" height="200"></canvas>
                </div>

                <div class="card">
                    <div class="chart-header"><span class="chart-title">Age Distribution</span>
                        <div class="flex gap-1"><i class="fas fa-info-circle chart-ctrl-btn"></i><i class="fas fa-times chart-ctrl-btn"></i><i class="fas fa-bars chart-ctrl-btn" onclick="toggleMenu('m5')"></i></div>
                    </div>
                    <div id="m5" class="chart-menu"><div class="menu-item">Download <i class="fas fa-download text-[10px]"></i></div></div>
                    <canvas id="ageDistChart" height="200"></canvas>
                </div>
                
                <div class="card">
                    <div class="chart-header"><span class="chart-title">Impact Distribution</span>
                        <div class="flex gap-1"><i class="fas fa-info-circle chart-ctrl-btn"></i><i class="fas fa-times chart-ctrl-btn"></i><i class="fas fa-bars chart-ctrl-btn" onclick="toggleMenu('m6')"></i></div>
                    </div>
                    <div id="m6" class="chart-menu"><div class="menu-item">Download <i class="fas fa-download text-[10px]"></i></div></div>
                    <canvas id="impactChart" height="200"></canvas>
                </div>

                <div class="card lg:col-span-1">
                    <div class="chart-header"><span class="chart-title">Supporting Read % (SR%)</span>
                        <div class="flex gap-1"><i class="fas fa-info-circle chart-ctrl-btn"></i><i class="fas fa-times chart-ctrl-btn"></i><i class="fas fa-bars chart-ctrl-btn" onclick="toggleMenu('m7')"></i></div>
                    </div>
                    <div id="m7" class="chart-menu"><div class="menu-item">Compare Groups <i class="fas fa-chevron-right text-[8px]"></i></div><div class="menu-item">Download <i class="fas fa-download text-[10px]"></i></div></div>
                    <canvas id="srChart" height="200"></canvas>
                </div>

                <div class="card lg:col-span-2">
                    <div class="chart-header"><span class="chart-title">Total Reads</span>
                        <div class="flex gap-1"><i class="fas fa-info-circle chart-ctrl-btn"></i><i class="fas fa-times chart-ctrl-btn"></i><i class="fas fa-bars chart-ctrl-btn" onclick="toggleMenu('m8')"></i></div>
                    </div>
                    <div id="m8" class="chart-menu"><div class="menu-item">Compare Groups <i class="fas fa-chevron-right text-[8px]"></i></div><div class="menu-item">Download <i class="fas fa-download text-[10px]"></i></div></div>
                    <canvas id="totalReadsChart" height="100"></canvas>
                </div>
                
                <div class="card">
                    <div class="chart-header"><span class="chart-title">Cancer Type</span>
                        <div class="flex gap-1"><i class="fas fa-info-circle chart-ctrl-btn"></i><i class="fas fa-times chart-ctrl-btn"></i><i class="fas fa-bars chart-ctrl-btn" onclick="toggleMenu('m9')"></i></div>
                    </div>
                    <div id="m9" class="chart-menu"><div class="menu-item">Download <i class="fas fa-download text-[10px]"></i></div></div>
                    <canvas id="cancerTypeChart" height="200"></canvas>
                </div>
                <div class="card">
                    <div class="chart-header"><span class="chart-title">AMP Classification</span>
                        <div class="flex gap-1"><i class="fas fa-info-circle chart-ctrl-btn"></i><i class="fas fa-times chart-ctrl-btn"></i><i class="fas fa-bars chart-ctrl-btn" onclick="toggleMenu('m10')"></i></div>
                    </div>
                    <div id="m10" class="chart-menu" style="display: none;"><div class="menu-item">Compare Groups <i class="fas fa-chevron-right text-[8px]"></i></div><div class="menu-item">Download <i class="fas fa-download text-[10px]"></i></div></div>
                    <canvas id="AMPClassificationChart" height="289" style="display: block; box-sizing: border-box; height: 193px; width: 193px;" width="289"></canvas>
                </div>
                <div class="card">
                    <div class="chart-header"><span class="chart-title">Therapy</span>
                        <div class="flex gap-1"><i class="fas fa-info-circle chart-ctrl-btn"></i><i class="fas fa-times chart-ctrl-btn"></i><i class="fas fa-bars chart-ctrl-btn" onclick="toggleMenu('m11')"></i></div>
                    </div>
                    <div id="m11" class="chart-menu"><div class="menu-item">Compare Groups <i class="fas fa-chevron-right text-[8px]"></i></div><div class="menu-item">Download <i class="fas fa-download text-[10px]"></i></div></div>
                    <canvas id="therapyChart" height="200"></canvas>
                </div>
            </div>

            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-bold">Detailed Cohort Data</h2>
                <div class="flex gap-2">
                    <button class="px-3 py-1 border border-gray-200 rounded text-[10px] font-bold bg-white uppercase hover:bg-gray-50">
                        <i class="fas fa-layer-group mr-1"></i> Group By
                    </button>
                    <button class="px-3 py-1 border border-gray-200 rounded text-[10px] font-bold bg-white uppercase">
                        <i class="fas fa-download mr-1"></i> CSV
                    </button>
                </div>
            </div>

            <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden mb-12">
                <div class="overflow-x-auto">
                    <table class="w-full text-left">
                        <thead>
                            <tr>
                                <th>Case ID</th><th>Cancer Type</th><th>Therapy</th><th>Gene</th><th>Transcript</th><th>Report</th><th>Sex</th><th>Location</th><th>Func. Effect</th><th>HGVS g.</th><th>HGVS p.</th><th>AMP Classification</th>
                            </tr>
                        </thead>
                        <tbody id="dataTableBody" class="divide-y divide-gray-100">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleMenu(id) {
            const menu = document.getElementById(id);
            const isVisible = menu.style.display === 'block';
            document.querySelectorAll('.chart-menu').forEach(m => m.style.display = 'none');
            menu.style.display = isVisible ? 'none' : 'block';
        }

        // Table Data and Render
        const originalData = [
            { id: 'C-2026-001', cancer: 'NSCLC',therapy: 'Erlotinib', gene: 'EGFR', variant: 'NM_005228.5', report: 'Somatic', sex: 'Male', loc: 'Bengaluru', effect: 'Gain of Func', g: 'g.55259515T>G', p: 'p.L858R', ampclassification: 'Tier I' },
            { id: 'C-2026-001', cancer: 'NSCLC',therapy: 'Erlotinib', gene: 'EGFR', variant: 'NM_005228.4', report: 'Somatic', sex: 'Male', loc: 'Bengaluru', effect: 'Gain of Func', g: 'g.55242470C>T', p: 'p.T790M', ampclassification: 'Tier I' },
            { id: 'C-2026-005', cancer: 'CRC', therapy: 'Lorlatinib', gene: 'KRAS', variant: 'NM_033360.4', report: 'Somatic', sex: 'Female', loc: 'Chennai', effect: 'Gain of Func', g: 'g.25245350C>T', p: 'p.G12D', ampclassification: 'Tier II' },
            { id: 'C-2026-042', cancer: 'Melanoma', therapy: 'Dabrafenib', gene: 'BRAF', variant: 'NM_007294.3', report: 'Somatic', sex: 'Male', loc: 'Mumbai', effect: 'Loss of Func', g: 'g.41197708T>G', p: 'p.V600E', ampclassification: 'Tier I' },
            { id: 'C-2026-089', cancer: 'Breast Cancer', therapy: 'Entrectinib', gene: 'BRCA1',variant:'NM_006218.4', report: 'Germline ', sex:'Female', loc: 'Hyderabad', effect: 'Gain of Func', g: 'g.178952085A>G', p: 'p.C61E', ampclassification: 'Tier I' }
        ];

        function renderTable(data) {
            const tbody = document.getElementById('dataTableBody');
            tbody.innerHTML = data.map(r => `
                <tr>
                    <td class="font-bold text-indigo-700">${r.id}</td>
                    <td>${r.cancer}</td>
                    <td>${r.therapy}</td>
                    <td class="font-bold">${r.gene}</td>
                    <td class="text-gray-500 font-mono">${r.variant}</td>
                    <td>${r.report}</td>
                    <td>${r.sex}</td>
                    <td>${r.loc}</td>
                    <td><span class="${r.effect.includes('Gain') ? 'text-red-600' : 'text-orange-600'} font-bold">${r.effect}</span></td>
                    <td>${r.g}</td>
                    <td>${r.p}</td>
                    <td>${r.ampclassification}</td>
                </tr>
            `).join('');
        }
        renderTable(originalData);

        // Chart Initialization
        const opt = { responsive: true, plugins: { legend: { position: 'bottom', labels: { boxWidth: 12, font: { size: 9 } } } } };

        new Chart(document.getElementById('AMPClassificationChart'), { type: 'doughnut', data: { labels: ['Tier I (80%)', 'Tier II (20%)'], datasets: [{ data: [80, 20], backgroundColor: ['#6366f1', '#a855f7'] }] }, options: opt });
        new Chart(document.getElementById('variantDistChart'), { type: 'doughnut', data: { labels: ['SNV (65%)', 'CNV (35%)'], datasets: [{ data: [65, 35], backgroundColor: ['#6366f1', '#a855f7'] }] }, options: opt });
        new Chart(document.getElementById('prevalenceChart'), { type: 'bar', data: { labels: ['EGFR', 'TP53', 'KRAS', 'BRAF'], datasets: [{ label: '% Prevalence', data: [82, 65, 45, 30], backgroundColor: '#818cf8' }] }, options: { ...opt, indexAxis: 'y' } });
        new Chart(document.getElementById('mutationScatterChart'), { type: 'scatter', data: { datasets: [{ label: 'Patients', data: [{x: 5, y: 0.1}, {x: 12, y: 0.3}, {x: 25, y: 0.5}], backgroundColor: '#6366f1' }] }, options: opt });
        new Chart(document.getElementById('mutationCountChart'), { type: 'bar', data: { labels: ['155', '175', '195', '215', '235'], datasets: [{ label: 'Count', data: [30, 80, 180, 90, 40], backgroundColor: '#3b82f6' }] }, options: opt });
        new Chart(document.getElementById('impactChart'), { type: 'pie', data: { labels: ['High', 'Medium', 'Low'], datasets: [{ data: [342, 580, 326], backgroundColor: ['#ef4444', '#f59e0b', '#10b981'] }] }, options: opt });
        new Chart(document.getElementById('therapyChart'), { type: 'bar', data: { labels: ['Erlotinib', 'Lorlatinib', 'Dabrafenib', 'Entrectinib'], datasets: [{ label: 'Frequency', data: [55, 25, 83, 72], backgroundColor: '#818cf8' }] }});
        // Age Distribution
        new Chart(document.getElementById('ageDistChart'), {
            type: 'bar',
            data: { labels: ['<30', '31-50', '51-70', '71+'], datasets: [{ label: 'Patients', data: [15, 35, 40, 10], backgroundColor: '#c084fc' }] } });
        // Line Chart for SR%
        new Chart(document.getElementById('srChart'), { 
            type: 'line', 
            data: { labels: ['S-001', 'S-002', 'S-003', 'S-004', 'S-005', 'S-006'], datasets: [{ label: 'SR%', data: [42, 45, 38, 50, 47, 52], borderColor: '#6366f1', backgroundColor: 'rgba(99, 102, 241, 0.1)', fill: true, tension: 0.4 }] } });
        
        // Bar Chart for Total Reads
        new Chart(document.getElementById('totalReadsChart'), { 
            type: 'line', 
            data: { labels: ['S-001', 'S-002', 'S-003', 'S-004', 'S-005', 'S-006'], datasets: [{ label: 'Reads (M)', data: [12, 10, 15, 11, 14, 13], backgroundColor: '#10b981' }] } });
        new Chart(document.getElementById('cancerTypeChart'), { type: 'polarArea', data: { labels: ['Lung', 'Breast', 'Colorectal'], datasets: [{ data: [40, 25, 20], backgroundColor: ['#818cf8', '#f472b6', '#fbbf24'] }] }, options: opt });
        window.onclick = (e) => { if (!e.target.closest('.chart-ctrl-btn')) document.querySelectorAll('.chart-menu').forEach(m => m.style.display = 'none'); };
    </script>
</body>
</html>